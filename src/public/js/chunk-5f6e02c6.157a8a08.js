(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f6e02c6"],{"016f":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Manage Users")]),r("hr",{staticStyle:{color:"#222"}}),r("b-button",{on:{click:function(t){return e.$bvModal.show("regForm")}}},[e._v(" Add new User")]),r("hr"),r("b-list-group",[r("b-list-group-item",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("h4",[e._v("Username")])]),r("div",{staticClass:"col-md-3"},[r("h4",[e._v("Designation")])]),r("div",{staticClass:"col-md-3"},[r("h4",[e._v("Email")])]),r("div",{staticClass:"col-md-2"},[r("b-button-group",[r("h4",[e._v("Actions")])])],1)])]),e._l(e.users,(function(t){return r("b-list-group-item",{key:t._id},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[e._v(" "+e._s(t.username)+" ")]),r("div",{staticClass:"col-md-3"},[e._v(" "+e._s(t.designation)+" ")]),r("div",{staticClass:"col-md-3"},[e._v(" "+e._s(t.email)+" ")]),r("div",{staticClass:"col-md-2"},[r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"danger",title:"Delete User"},on:{click:function(r){return e.deleteUser(t)}}},[r("DeleteIcon",{staticClass:"icon"})],1)],1)])])}))],2),r("b-modal",{attrs:{id:"regForm",title:"Add new user","hide-footer":""}},["admin"==e.designation||"superadmin"==e.designation?r("RegisterForm",{staticClass:"full_height"}):r("div",[r("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("Only admins can add new users.")])],1)],1)],1)},n=[],a=r("1da1"),o=r("5530"),i=(r("96cf"),r("d3b7"),r("2f62")),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h2",[e._v(" Register New User ")]),r("b-form",{staticClass:"main-form"},[r("b-form-group",{attrs:{label:"Username: ","label-for":"reg_username",description:"Please enter unique username."}},[r("b-form-input",{attrs:{id:"reg_username",placeholder:"Enter username"},model:{value:e.regUserForm.username,callback:function(t){e.$set(e.regUserForm,"username",t)},expression:"regUserForm.username"}})],1),r("b-form-group",{attrs:{label:"Email: ","label-for":"reg_email",description:"Please enter valid email"}},[r("b-form-input",{attrs:{id:"reg_email",placeholder:"Enter your email",type:"email"},model:{value:e.regUserForm.email,callback:function(t){e.$set(e.regUserForm,"email",t)},expression:"regUserForm.email"}})],1),r("b-form-group",{attrs:{label:"Password: ","label-for":"reg_pwd",description:"Please enter strong password"}},[r("b-form-input",{attrs:{id:"reg_pwd",type:"password",placeholder:"Your password here"},model:{value:e.regUserForm.password,callback:function(t){e.$set(e.regUserForm,"password",t)},expression:"regUserForm.password"}})],1),r("b-form-group",{attrs:{label:"Institute","label-for":"reg_institute",description:"This should be consistent with your other users"}},[r("b-form-input",{attrs:{id:"reg_institute",placeholder:"The name of your institue"},model:{value:e.regUserForm.institute,callback:function(t){e.$set(e.regUserForm,"institute",t)},expression:"regUserForm.institute"}})],1),r("b-form-group",{attrs:{label:"Role/Designation","label-for":"reg_designation",description:"The role you want to assign the user."}},[r("b-form-select",{attrs:{id:"reg_designation",options:e.designationOptions},model:{value:e.regUserForm.designation,callback:function(t){e.$set(e.regUserForm,"designation",t)},expression:"regUserForm.designation"}})],1),r("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.registerUser()}}},[e._v("Create User")])],1)],1)},c=[],u={name:"RegisterForm",methods:{registerUser:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("register",e.regUserForm).then((function(){e.$bvModal.msgBoxOk("Registered Successfully").catch((function(){e.$root.$off("bv::modal::hide")})),e.$root.$off("bv::modal::hide")})).catch((function(t){e.$bvModal.msgBoxOk("Could not Register: "+t).then((function(){console.log(t)}))}));case 1:case"end":return t.stop()}}),t)})))()}},data:function(){return{regUserForm:{username:"",password:"",email:"",institute:"",designation:null},designationOptions:[{text:"Please select an Option",value:null,disabled:!0},{value:"admin",text:"Administrative User"},{value:"user",text:"Normal User"},{value:"maintenance",text:"Maintenance Staff"},{value:"maintenance",text:"Observer"}]}},beforeDestroy:function(){this.$root.$off("bv::modal::hide")}},d=u,m=(r("7197"),r("2877")),g=Object(m["a"])(d,l,c,!1,null,null,null),p=g.exports,f=r("0647"),v={name:"ManageUsers",data:function(){return{users:[]}},components:{RegisterForm:p,DeleteIcon:f["a"]},computed:Object(o["a"])({},Object(i["c"])({designation:"getDesignation"})),mounted:function(){this.fetchUsers()},methods:{fetchUsers:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/user/allusers",{headers:new Headers({Authorization:"Bearer "+e.$store.getters.getAccessToken})});case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,console.log(s),e.users=s;case 8:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$bvModal.msgBoxConfirm("Are you sure you want to delete this user? "+e.username);case 2:s=r.sent,s&&t.$store.dispatch("deleteUser",e).then((function(){t.$bvModal.msgBoxOk("Deleted user "+e.username),t.fetchUsers()})).catch((function(e){console.log(e),t.$bvModal.msgBoxOk("Could not delete user")}));case 4:case"end":return r.stop()}}),r)})))()}}},b=v,h=(r("3760"),Object(m["a"])(b,s,n,!1,null,"7d06e77e",null));t["default"]=h.exports},"0647":function(e,t,r){"use strict";var s=function(e,t){var r=t._c;return r("span",t._g(t._b({staticClass:"material-design-icon delete-icon",class:[t.data.class,t.data.staticClass],attrs:{"aria-hidden":t.props.decorative,"aria-label":t.props.title,role:"img"}},"span",t.data.attrs,!1),t.listeners),[r("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.props.fillColor,width:t.props.size,height:t.props.size,viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}},[t.props.decorative?t._e():r("title",[t._v(t._s(t.props.title))])])])])},n=[],a=(r("a9e3"),{name:"DeleteIcon",props:{title:{type:String,default:"Delete icon"},decorative:{type:Boolean,default:!1},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}}),o=a,i=r("2877"),l=Object(i["a"])(o,s,n,!0,null,null,null);t["a"]=l.exports},"1d96":function(e,t,r){},3760:function(e,t,r){"use strict";r("1d96")},7197:function(e,t,r){"use strict";r("d201")},d201:function(e,t,r){}}]);
//# sourceMappingURL=chunk-5f6e02c6.157a8a08.js.map